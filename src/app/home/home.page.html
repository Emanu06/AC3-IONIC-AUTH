<div *ngIf="user$ | async as user; else showLogin">

  <ion-header [translucent]="true">
    <ion-toolbar color="tertiary">
      <!-- Mostra o email do usuário no título -->
      <ion-title>{{ user.email }}</ion-title>
      <ion-buttons slot="end">
        <!-- Botão de Logout -->
        <ion-button (click)="logout()">
          <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding">
    <!-- Botões para adicionar pets e cuidadores -->
    <ion-button expand="full" (click)="addPet()">
      Add novo pet
      <ion-icon name="add" slot="end"></ion-icon>
    </ion-button>
    <ion-button expand="full" (click)="addCuidador()">
      Add novo cuidador
      <ion-icon name="add" slot="end"></ion-icon>
    </ion-button>

    <!-- O conteúdo da sua lista de pets e cuidadores fica aqui -->
    <h1>Lista Pets</h1>
    <ion-list>
      <ion-item *ngIf="pets.length === 0">
        <ion-label>Nenhum pet cadastrado ainda</ion-label>
      </ion-item>
      <ion-item-sliding *ngFor="let pet of pets">
        <ion-item lines="full" button (click)="editPet(pet)">
          <ion-label>
            <h2>{{pet.name}}</h2>
            <p>{{pet.especie}}</p>
          </ion-label>
        </ion-item>
        <ion-item-options side="end">
          <ion-item-option color="danger" (click)="deletePet(pet.id!)">
            <ion-icon slot="icon-only" name="trash"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>

    <h1>Lista Cuidadores</h1>
    <ion-list>
      <ion-item *ngIf="cuidadores.length === 0">
        <ion-label>Nenhum cuidador cadastrado ainda</ion-label>
      </ion-item>
      <ion-item-sliding *ngFor="let cuidador of cuidadores">
        <ion-item lines="full" button (click)="editCuidador(cuidador)">
          <ion-label>
            <h2>{{cuidador.name}}</h2>
            <p>{{cuidador.experience}}</p>
          </ion-label>
        </ion-item>
        <ion-item-options side="end">
          <ion-item-option color="danger" (click)="deleteCuidador(cuidador.id!)">
            <ion-icon slot="icon-only" name="trash"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </ion-content>

</div>


<!-- Template de Login: Mostra quando o usuário está DESLOGADO -->
<ng-template #showLogin>
  <ion-header>
    <ion-toolbar color="tertiary">
      <ion-title>Bem-vindo</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding">
    <ion-list>
      <ion-item>
        <ion-label position="floating">E-mail</ion-label>
        <ion-input type="email" [(ngModel)]="email" required></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Senha</ion-label>
        <ion-input type="password" [(ngModel)]="password" required></ion-input>
      </ion-item>
    </ion-list>

    <ion-button expand="full" (click)="login()">Entrar</ion-button>
    <ion-button expand="full" fill="outline" (click)="register()">Registrar</ion-button>

    <ion-grid>
      <ion-row class="ion-align-items-center">
        <ion-col><ion-item-divider></ion-item-divider></ion-col>
        <ion-col size="auto"><ion-text>ou</ion-text></ion-col>
        <ion-col><ion-item-divider></ion-item-divider></ion-col>
      </ion-row>
    </ion-grid>

    <ion-button expand="full" color="danger" (click)="loginGoogle()">
      <ion-icon name="logo-google" slot="start"></ion-icon>
      Entrar com Google
    </ion-button>
  </ion-content>
</ng-template>